<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aiven Rental - Invoice</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-shell">
    <div class="layout">
      <aside class="sidebar">
        <div class="nav-links">
          <div class="nav-group">
            <div class="nav-group-title">Overview</div>
            <a class="nav-link" href="dashboard.html">Dashboard</a>
            <a class="nav-link" href="work-bench.html">Work Bench</a>
            <a class="nav-link" href="reports.html">Reports</a>
          </div>
          <div class="nav-group">
            <div class="nav-group-title">Operations</div>
            <a class="nav-link" href="rental-quotes.html">Quotes</a>
            <a class="nav-link" href="rental-orders.html">Rental Orders</a>
            <a class="nav-link active" href="accounts-receivable.html">Accounts Receivable</a>
          </div>
          <div class="nav-group">
            <div class="nav-group-title">Repairs</div>
            <a class="nav-link" href="work-orders.html">Work Orders</a>
            <a class="nav-link" href="parts.html">Parts</a>
          </div>
          <div class="nav-group">
            <div class="nav-group-title">Inventory</div>
            <a class="nav-link" href="equipment.html">Assets</a>
            <a class="nav-link" href="types.html">Equipments</a>
            <a class="nav-link" href="locations.html">Locations</a>
          </div>
          <div class="nav-group">
            <div class="nav-group-title">People</div>
            <a class="nav-link" href="customers.html">Customers</a>
            <a class="nav-link" href="sales-people.html">Sales People</a>
          </div>
          <div class="nav-group">
            <div class="nav-group-title">Custom</div>
            <a class="nav-link" href="dispatch.html">Dispatch</a>
          </div>
          <div class="nav-group">
            <div class="nav-group-title">Admin</div>
            <a class="nav-link" href="settings.html">Settings</a>
            <a class="nav-link" href="accounts.html">Accounts</a>
          </div>
        </div>
      </aside>

      <div>
        <header class="topbar">
          <div class="topbar-inner">
            <a class="topbar-brand" href="dashboard.html" aria-label="Aiven Rental dashboard">
              <span class="topbar-mark">AR</span>
              <span class="topbar-title">Aiven <span class="topbar-title-accent">Rental</span></span>
            </a>
            <div class="topbar-actions">
              <a class="ghost" href="/#/marketplace">Marketplace</a>
              <a class="primary" href="/#/home">Home</a>
            </div>
          </div>
        </header>

        <header class="hero">
          <div>
            <p class="eyebrow">Accounts Receivable</p>
            <div class="title-row">
              <h1 id="invoice-title" style="margin:0;">Invoice</h1>
              <span class="pill" id="invoice-pill" style="display:none;"></span>
            </div>
            <p class="lede" id="invoice-subtitle">Loading…</p>
          </div>
          <div class="inline-actions">
            <button class="ghost" id="download-pdf" type="button">Download PDF</button>
            <button class="ghost" id="email-invoice" type="button">Email customer</button>
            <button class="ghost" id="create-credit-memo" type="button">Create credit memo</button>
            <button class="ghost" id="create-debit-memo" type="button">Create debit memo</button>
            <button class="ghost danger" id="void-invoice" type="button">Void</button>
            <button class="ghost danger" id="delete-invoice" type="button">Delete</button>
            <button class="ghost" id="back" type="button">Back</button>
          </div>
        </header>

        <main class="grid">
          <section class="card wide">
            <div class="card-header">
              <div>
                <h2>Customer</h2>
              </div>
            </div>
            <p class="hint" id="company-meta">Loading…</p>
            <div class="details-panel" id="customer-details" style="display:none;"></div>
          </section>

          <section class="card wide payments-section">
            <div class="card-header">
              <div>
                <h2>Billing context</h2>
              </div>
            </div>
            <div class="details-panel" id="billing-context" style="display:none;"></div>
          </section>

          <section class="card wide">
            <div class="card-header">
              <div>
                <h2>General notes</h2>
                <p class="hint">Why this invoice was created.</p>
              </div>
            </div>
            <div class="details-panel" id="invoice-general-notes" style="display:none;"></div>
          </section>

          <section class="card wide">
            <div class="card-header">
              <div>
                <h2>Line items</h2>
                <p class="hint">Editing invoice line items does not affect inventory.</p>
              </div>
              <div class="inline-actions">
                <button class="ghost" id="add-line" type="button">+ Line</button>
                <button class="primary" id="save-lines" type="button">Save</button>
              </div>
            </div>
            <div class="table-wrap">
              <table class="table line-items-table">
                <thead>
                  <tr>
                    <th>Description</th>
                    <th style="width: 120px;">Qty</th>
                    <th style="width: 140px;">Unit price</th>
                    <th style="width: 120px;">Tax rate (%)</th>
                    <th style="width: 90px;">Taxable</th>
                    <th style="width: 140px;">Amount</th>
                    <th style="width: 70px;"></th>
                  </tr>
                </thead>
                <tbody id="lines-body"></tbody>
              </table>
            </div>
            <p class="hint" id="lines-meta"></p>
          </section>

          <section class="card wide">
            <div class="card-header">
              <div>
                <h2>Payments</h2>
              </div>
            </div>
            <div class="two-col payments-layout">
              <div class="stack">
                <form id="payment-form" class="stack payment-form">
                <div class="two-col">
                  <label>Payment amount
                    <input id="payment-amount" type="number" min="0" step="0.01" required />
                  </label>
                  <label>Paid at
                    <input id="payment-date" type="date" />
                  </label>
                </div>
                <div class="two-col">
                  <label>Method
                    <input id="payment-method" placeholder="cash, card, e-transfer…" />
                  </label>
                  <label>Reference
                    <input id="payment-ref" placeholder="receipt # / transaction id…" />
                  </label>
                </div>
                <label>Note
                  <input id="payment-note" />
                </label>
                <div class="payment-options">
                  <label class="inline">
                    <input id="payment-credit-only" type="checkbox" />
                    Record as customer credit (do not apply to this invoice)
                  </label>
                  <label class="inline">
                    <input id="payment-deposit-only" type="checkbox" />
                    Record as deposit (held until applied or refunded)
                  </label>
                </div>
                <div class="inline-actions">
                  <button class="primary" id="add-payment" type="submit">Add payment</button>
                </div>
                <p class="hint" id="payment-meta"></p>
                </form>

                <p class="hint" id="customer-credit">Available credit: --</p>
                <form id="apply-credit-form" class="stack">
                  <label>Apply customer credit
                    <input id="apply-credit-amount" type="number" min="0" step="0.01" placeholder="Leave blank to apply full balance" />
                  </label>
                  <div class="inline-actions">
                    <button class="ghost" id="apply-credit" type="submit">Apply credit</button>
                  </div>
                  <p class="hint" id="apply-credit-meta"></p>
                </form>

                <p class="hint" id="customer-deposit">Available deposit: --</p>
                <form id="apply-deposit-form" class="stack">
                  <label>Apply deposit
                    <input id="apply-deposit-amount" type="number" min="0" step="0.01" placeholder="Leave blank to apply full balance" />
                  </label>
                  <div class="inline-actions">
                    <button class="ghost" id="apply-deposit" type="submit">Apply deposit</button>
                  </div>
                  <p class="hint" id="apply-deposit-meta"></p>
                </form>

                <form id="refund-deposit-form" class="stack">
                  <label>Refund deposit
                    <input id="refund-deposit-amount" type="number" min="0" step="0.01" />
                  </label>
                  <label>Refund note
                    <input id="refund-deposit-note" placeholder="Optional note" />
                  </label>
                  <div class="inline-actions">
                    <button class="ghost" id="refund-deposit" type="submit">Refund deposit</button>
                  </div>
                  <p class="hint" id="refund-deposit-meta"></p>
                </form>
              </div>

              <div class="payments-side">
                <div class="table-title">Payment history</div>
                <div class="table-wrap">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>Method</th>
                        <th>Reference</th>
                        <th style="width: 110px;"></th>
                      </tr>
                    </thead>
                    <tbody id="payments-body">
                      <tr><td colspan="5" class="hint">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>
                <div style="height: 12px;"></div>
                <div class="table-title">Credit activity</div>
                <div class="table-wrap">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Invoice</th>
                      </tr>
                    </thead>
                    <tbody id="credit-activity-body">
                      <tr><td colspan="4" class="hint">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
        </main>
      </div>
    </div>
  </div>

  <div class="modal" id="email-invoice-modal">
    <div class="modal-content wide">
      <div class="modal-header">
        <h3>Email invoice</h3>
        <button class="ghost small" id="close-email-invoice-modal" type="button">Close</button>
      </div>
      <form id="email-invoice-form" class="stack">
        <label>To
          <input id="email-invoice-to" type="email" multiple placeholder="ap@company.com, billing@company.com" required />
        </label>
        <label>Message (optional)
          <textarea id="email-invoice-message" rows="5" placeholder="Add a short note…"></textarea>
        </label>
        <div class="inline-actions" style="justify-content:flex-start;">
          <button class="primary" id="send-email-invoice" type="submit">Send</button>
          <button class="ghost" id="cancel-email-invoice" type="button">Cancel</button>
        </div>
        <p class="hint" id="email-invoice-hint" style="margin:0;"></p>
      </form>
    </div>
  </div>

  <script src="session.js"></script>
  <script src="invoice.js"></script>
</body>
</html>




