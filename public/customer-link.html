<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aiven Rental - Customer Update</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="landing-shell">
    <main style="max-width: 1100px; margin: 0 auto;">
      <section class="card wide" id="link-used-card" style="display:none;">
        <div class="card-header">
          <div>
            <h1 style="margin:0;">Thank you!</h1>
            <p class="hint">This link has already been used.</p>
          </div>
        </div>
        <div class="inline-actions" style="justify-content:flex-start; display:none;" id="link-used-proof-actions">
          <a class="ghost" id="link-used-proof" href="#" target="_blank" rel="noreferrer">Download proof PDF</a>
        </div>
      </section>
      <section class="card wide" id="link-expired-card" style="display:none;">
        <div class="card-header">
          <div>
            <h1 style="margin:0;">Link expired</h1>
            <p class="hint">This link has expired.</p>
          </div>
        </div>
      </section>
      <form id="customer-link-form" class="grid" enctype="multipart/form-data">
        <section class="card wide">
          <div class="card-header">
            <div>
              <div class="title-row">
                <h1 id="page-title" style="margin:0;">Complete your details</h1>
              </div>
              <h2>Customer &amp; sales</h2>
              <p class="hint" id="page-subtitle">Review and submit your information below.</p>
            </div>
          </div>
          <div class="stack">
            <div class="info" id="link-banner">Loading your link...</div>
            <div class="stack" id="customer-section">
              <label>Company name
                <input id="company-name" autocomplete="organization" />
              </label>
              <div class="contact-block">
                <div class="contact-header">
                  <strong>Contacts</strong>
                  <button type="button" class="ghost small" id="add-contact-row">+ Add contact</button>
                </div>
                <div class="contacts-list stack" id="contacts-list"></div>
              </div>
              <div class="contact-block">
                <div class="contact-header">
                  <strong>Accounting contacts</strong>
                  <button type="button" class="ghost small" id="add-accounting-contact-row">+ Add contact</button>
                </div>
                <div class="contacts-list stack" id="accounting-contacts-list"></div>
              </div>
              <label>Street address
                <input id="street-address" autocomplete="street-address" />
              </label>
              <div class="three-col">
                <label>City
                  <input id="city" autocomplete="address-level2" />
                </label>
                <label>State / Region
                  <input id="region" autocomplete="address-level1" />
                </label>
                <label>Postal code
                  <input id="postal-code" autocomplete="postal-code" />
                </label>
              </div>
              <label>Country
                <input id="country" autocomplete="country-name" />
              </label>
              <div class="two-col" id="customer-po-field" style="display:none;">
                <label>Customer PO #
                  <input id="customer-po" />
                </label>
                <span></span>
              </div>
            </div>
          </div>
        </section>

        <section class="card wide" id="order-section" style="display:none;">
          <div class="card-header">
            <div>
              <h2>Pickup &amp; drop-off</h2>
            </div>
          </div>
          <div class="stack">
            <div class="two-col">
              <label>Fulfillment method
                <select id="fulfillment-method">
                  <option value="pickup">Pickup</option>
                  <option value="dropoff">Dropoff</option>
                </select>
              </label>
              <label>Pickup / Drop-off address
                <input id="dropoff-address" />
              </label>
            </div>
            <label>Pickup / Drop-off instructions
              <textarea id="logistics-instructions" class="compact-textarea" rows="1"></textarea>
            </label>
          </div>
        </section>

        <section class="card wide" id="line-items-section" style="display:none;">
          <div class="card-header">
            <div>
              <h2>Rental line items</h2>
            </div>
            <div class="inline-actions">
              <button type="button" class="ghost" id="add-line-item">Add line item</button>
            </div>
          </div>
          <div class="stack" id="line-items"></div>
        </section>

        <section class="card wide" id="rental-info-section" style="display:none;">
          <div class="card-header">
            <div>
              <h2>Rental information</h2>
            </div>
          </div>
          <div class="stack">
            <div class="three-col">
              <div data-rental-info-field="siteName">
                <label>Site name
                  <input id="site-name" />
                </label>
              </div>
              <div data-rental-info-field="siteAddress">
                <label>Site address
                  <input id="site-address" />
                </label>
                <div class="inline-actions" style="justify-content:flex-start;">
                  <button type="button" class="ghost small" id="open-side-address-picker">Pick site address on map</button>
                </div>
              </div>
              <div data-rental-info-field="siteAccessInfo">
                <label>Site access information / pin
                  <textarea id="site-access-info" class="compact-textarea" rows="1"></textarea>
                </label>
              </div>
            </div>
            <div data-rental-info-field="criticalAreas">
              <label>Critical Areas on Site
                <textarea id="critical-areas"></textarea>
              </label>
            </div>
            <div data-rental-info-field="generalNotes">
              <label>General notes</label>
              <div class="rich-editor" id="general-notes-editor-wrap">
                <div class="rich-toolbar" id="general-notes-toolbar" role="toolbar" aria-label="General notes editor">
                  <select data-rich="font" aria-label="Font">
                    <option value="">Font</option>
                    <option value="Inter">Inter</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Arial">Arial</option>
                    <option value="Verdana">Verdana</option>
                    <option value="Courier New">Courier New</option>
                  </select>
                  <select data-rich="size" aria-label="Font size">
                    <option value="">Size</option>
                    <option value="1">10</option>
                    <option value="2">12</option>
                    <option value="3">14</option>
                    <option value="4">16</option>
                    <option value="5">18</option>
                    <option value="6">24</option>
                    <option value="7">32</option>
                  </select>
                  <select data-rich="block" aria-label="Text style">
                    <option value="">Style</option>
                    <option value="p">Normal</option>
                    <option value="h1">Heading 1</option>
                    <option value="h2">Heading 2</option>
                    <option value="h3">Heading 3</option>
                  </select>
                  <button type="button" class="ghost tiny" data-rich-cmd="bold" aria-label="Bold"><strong>B</strong></button>
                  <button type="button" class="ghost tiny" data-rich-cmd="italic" aria-label="Italic"><em>I</em></button>
                  <button type="button" class="ghost tiny" data-rich-cmd="underline" aria-label="Underline"><span style="text-decoration:underline;">U</span></button>
                  <button type="button" class="ghost tiny" data-rich-cmd="insertUnorderedList" aria-label="Bullet list">Bullets</button>
                  <button type="button" class="ghost tiny" data-rich-cmd="insertOrderedList" aria-label="Numbered list">Numbers</button>
                  <button type="button" class="ghost tiny" data-rich-action="link" aria-label="Insert link">Link</button>
                  <button type="button" class="ghost tiny" id="general-notes-insert-image" data-rich-action="image" aria-label="Insert image">Image</button>
                  <button type="button" class="ghost tiny" data-rich-action="clear" aria-label="Clear formatting">Clear</button>
                </div>
                <div
                  id="general-notes-editor"
                  class="rich-editor__body"
                  contenteditable="true"
                  data-placeholder="Capture any additional instructions for the owner."
                ></div>
                <textarea id="general-notes" hidden></textarea>
              </div>
              <div class="inline-actions" style="justify-content:flex-start; margin-top: 8px;">
                <label class="ghost small" for="general-notes-images">Add photos</label>
                <input id="general-notes-images" class="guard-notes-images" type="file" accept="image/*" multiple hidden />
                <span class="hint" id="general-notes-images-status"></span>
              </div>
              <div class="guard-notes-previews" id="general-notes-previews"></div>
            </div>
            <div class="contact-block" data-rental-info-field="emergencyContacts">
              <div class="contact-header">
                <strong>Emergency contacts</strong>
                <button type="button" class="ghost small" id="add-emergency-contact-row">+ Add contact</button>
              </div>
              <div class="contacts-list stack" id="emergency-contacts-list"></div>
            </div>
            <div class="contact-block" data-rental-info-field="siteContacts">
              <div class="contact-header">
                <strong>Site contacts</strong>
                <button type="button" class="ghost small" id="add-site-contact-row">+ Add contact</button>
              </div>
              <div class="contacts-list stack" id="site-contacts-list"></div>
            </div>
            <div data-rental-info-field="notificationCircumstances">
              <label>Notification circumstance</label>
              <div id="notification-circumstances-container" style="display:flex; flex-wrap:wrap; gap:16px; align-items:center;">
                <label style="display:flex; align-items:center; gap:6px; cursor:pointer;">
                  <input type="checkbox" value="Damage"> Damage
                </label>
                <label style="display:flex; align-items:center; gap:6px; cursor:pointer;">
                  <input type="checkbox" value="Trespassing"> Trespassing
                </label>
                <label style="display:flex; align-items:center; gap:6px; cursor:pointer;">
                  <input type="checkbox" value="Suspicious activity"> Suspicious activity
                </label>
                <div style="display:flex; align-items:center; gap:6px;">
                  <label style="display:flex; align-items:center; gap:6px; cursor:pointer;">
                    <input type="checkbox" value="Other" id="notification-circumstance-other-cb"> Other
                  </label>
                  <input id="notification-circumstance-other-input" type="text" placeholder="Please specify..." style="display:none; margin-left:8px; padding:4px 8px; border:1px solid #ccc; border-radius:4px;" />
                </div>
              </div>
            </div>
            <div class="coverage-block" data-rental-info-field="coverageHours">
              <div class="coverage-header">
                <strong>Hours of coverage required</strong>
                <div class="inline-actions" style="gap:12px;">
                  <label class="coverage-timezone">
                    <span class="hint">Time zone</span>
                    <select id="coverage-timezone"></select>
                  </label>
                  <span class="hint">Use 24-hour time - 5-minute steps</span>
                  <button type="button" class="ghost small" id="add-coverage-slot">+ Add time slot</button>
                </div>
              </div>
              <div class="coverage-slots" id="coverage-slots"></div>
            </div>
          </div>
        </section>

        <section class="card wide" id="documents-section" style="display:none;">
          <div class="card-header">
            <div>
              <h2>Requested documents</h2>
            </div>
          </div>
          <div class="stack" id="document-uploads"></div>
        </section>

        <section class="card wide" id="terms-section" style="display:none;">
          <div class="card-header">
            <div>
              <h2>Terms</h2>
            </div>
          </div>
          <div class="info" id="terms-text"></div>
        </section>

        <section class="card wide" id="signature-section" style="display:none;">
          <div class="card-header">
            <div>
              <h2>E-signature</h2>
            </div>
          </div>
          <div class="stack">
            <label>Typed name
              <input id="signature-name" />
            </label>
            <div class="stack">
              <canvas id="signature-canvas" width="600" height="200" style="border:1px solid var(--border); border-radius:12px; background:#fff;"></canvas>
              <div class="inline-actions" style="justify-content:flex-start;">
                <button type="button" class="ghost small" id="clear-signature">Clear signature</button>
              </div>
            </div>
          </div>
        </section>

        <section class="card wide">
          <div class="inline-actions" style="justify-content:flex-end;">
            <button type="submit" class="primary" id="submit-link">Submit update</button>
          </div>
          <div class="inline-actions" style="justify-content:flex-start; display:none;" id="proof-actions">
            <a class="ghost" id="download-proof" href="#" target="_blank" rel="noreferrer">Download proof PDF</a>
          </div>
          <p class="hint" id="link-hint"></p>
        </section>
      </form>
    </main>
  </div>

  <div class="modal" id="side-address-picker-modal">
    <div class="modal-content wide">
      <div class="modal-header">
        <h3>Pick site address</h3>
        <button class="ghost small" id="close-side-address-picker" type="button">Close</button>
      </div>
      <div class="stack">
        <div class="three-col">
          <label>Search address
            <input id="side-address-picker-search" placeholder="Start typing an address..." autocomplete="off" />
            <div id="side-address-picker-suggestions" class="rs-autocomplete" hidden></div>
          </label>
          <label>Site address
            <input id="side-address-picker-input" placeholder="Site address or label..." />
          </label>
          <label>Map view
            <select id="side-address-picker-map-style">
              <option value="street">Street</option>
              <option value="satellite">Satellite</option>
            </select>
          </label>
        </div>
        <div class="two-col">
          <label>Unit pin
            <select id="side-address-unit-select">
              <option value="">Select unit...</option>
            </select>
          </label>
          <div class="stack">
            <label>Unit pin actions</label>
            <div class="inline-actions" style="justify-content:flex-start; gap:8px;">
              <button class="ghost small" id="clear-side-address-unit" type="button">Clear</button>
              <button class="primary small" id="save-side-address-unit-pin" type="button">Set unit pin</button>
            </div>
          </div>
        </div>
        <p class="hint" id="side-address-unit-meta">Select a unit, then click the map to drop a pin for its current location.</p>
        <div id="side-address-picker-map" class="map-picker"></div>
        <p class="hint" id="side-address-picker-meta">Tip: click the map to drop a pin. We'll start centered on your
          current device location (if permitted).</p>
        <div class="inline-actions" style="justify-content:flex-end;">
          <button class="primary" id="save-side-address-picker" type="button">Use this address</button>
        </div>
      </div>
    </div>
  </div>

  <script src="customer-link.js"></script>
</body>
</html>
